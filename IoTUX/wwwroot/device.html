<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>device detail</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.3/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
    <script src="https://unpkg.com/vue@3"></script>
    <link href="style.css" rel="stylesheet" />
</head>
<body>
    <div id="app" v-cloak>

        <h1>{{device.deviceId}}</h1>
        <div>
            <span :style="{color: device.connectionState === 'Connected' ? 'green' : 'red'}">{{device.connectionState}} </span>
            <span>-</span>
            <span>{{formatDate(device.lastActivityTime)}}</span>
        </div>
        Model: <a href="#">{{device.modelId}}</a>

        <div>
            <h3>Commands</h3>
            <command command-name="getRuntimeStats" :device-id="gv(device,'deviceId')"></command>
        </div>

        <div>
            <h3>Device Twin</h3>
            <div class="reported">
                <reported-property prop-name="started" :reported-node="gv(device, 'properties.reported')"></reported-property>

                <writable-property prop-name="interval"
                                   :device-id="gv(device,'deviceId')"
                                   :reported-node="gv(device, 'properties.reported')"
                                   :desired-node="gv(device,'properties.desired')"
                                   @prop-updated="created()"></writable-property>

                <writable-property prop-name="enabled"
                                   :device-id="gv(device,'deviceId')"
                                   :reported-node="gv(device, 'properties.reported')"
                                   :desired-node="gv(device,'properties.desired')"></writable-property>
            </div>
        </div>

    </div>
    <script type="module">
        import device from './device.js'
        import Command from './Command.js'
        import ReportedProperty from './ReportedProperty.js'
        import WritableProperty from './WritableProperty.js'
        const { createApp } = Vue
        const app = createApp(device)
        app.component('Command', Command)
        app.component('ReportedProperty', ReportedProperty)
        app.component('WritableProperty', WritableProperty)
        app.mount('#app')
    </script>
</body>
</html>